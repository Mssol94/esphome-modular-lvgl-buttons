---
# Dimmer light switch button
# vars:
  # uid:
  # height:
  # text:
  # icon:
  # entity_id:
height: ${height}
id: button_${uid}
widgets:
  - label:
      text_font: $icon_font
      align: top_left
      id: icon_${uid}
      text: ${icon}
  - label:
      align: bottom_left
      id: label_${uid}
      text: ${text}
  - slider:
      align: top_right
      id: slider_${uid}
      x: -5
      y: 5
      width: 40
      height: 165
      pad_all: 0
      min_value: 0
      max_value: 255
      radius: 10px
      knob:
        bg_color: white
        radius: 2px
        pad_left: 0
        pad_right: 0
        pad_top: 0
        pad_bottom: 0
      indicator:
        radius: 0px
        bg_color: gray
      on_release:
        - homeassistant.action:
            action: light.turn_on
            data:
              entity_id: ${entity_id}
              brightness: !lambda return int(x);
    widget: ${widget_name}_lightbulb_btn
    on_click:
  # SHORT press (50-500ms) - ALWAYS toggles the light
      - min_length: 50ms
        max_length: 500ms
        then:
          - homeassistant.action:
              action: light.toggle
              data:
                entity_id: ${entity_id}
      
  # LONG press (800-3000ms) - switch mode (only if supported)
      - min_length: 800ms
        max_length: 3000ms
        then:
          lvgl.page.show: ${uid}_light_page

      
packages:
  light_page: !include
    file: esphome-modular-lvgl-buttons/pages/light.yaml
    vars:
      light_entity: ${entity_id}
      widget_name: ${uid}      